<style>
.svg-container {
    width: 100vw;
    height: 100vh;
}
.line {
    stroke: orange;
    stroke-width: 3px;
    fill: none;
}
body {
    margin: 0;
}
</style>
<div class='svg-container'>
<!--Our target svg inside of which we will build the graph -->
<svg>
</svg>
</div>
<!--Loading d3-->
<script src="https://d3js.org/d3.v5.min.js"></script>
<script>
const getHappinessData = () => {
    return fetch('/assets/data/share-of-people-who-say-they-are-happy.json').then(res => res.json())
}
getHappinessData().then( rawData => {
    const graphWidth = window.innerWidth
    const graphHeight = 400
    buildLineGraph(rawData, graphWidth, graphHeight)
} )

<p>const buildLineGraph = (rawData, graphWidth, graphHeight) =&gt; {</p>
<pre><code>const properties = rawData.properties
const entries = rawData.data

const {xExtent, yExtent} = getExtents(entries)
// xExtent === {min: &quot;1984&quot;, max: &quot;2014&quot;}
// yExtend === {min: &quot;29.678267&quot;, max: &quot;98.113213&quot;}

const xScale = d3.scaleLinear()
                            .domain([xExtent.min,  xExtent.max])
                            .range([0, graphWidth])


const yScale = d3.scaleLinear()
                        .domain([yExtent.min,  yExtent.max])
                        // Notice that the range is reversed here
                        .range([ graphHeight, 0 ])

// This is the function which we will use to draw our lines
const drawLine = d3.line()
        .x( d =&gt; { return xScale(Number(d[0])) })
        .y( d =&gt; { return yScale(Number(d[1])) })

const numberOfLines = entries.length</code></pre>
<p>  // Grabbing our svg element to add out line paths to
    const svg = document.getElementsByTagName(&#39;svg&#39;)[0]</p>
<pre><code>// We are looping through each line
// remember in our data set each entry is a country
for(let i=0; i &lt; numberOfLines; i++) {
    const entry = entries[i]
    const g = document.createElement(&#39;g&#39;)
    // createElementNS is a weird requirement to create an svg path dynamically
    const path = document.createElementNS(&#39;http://www.w3.org/2000/svg&#39;, &#39;path&#39;)

    // The d attribute is key, that&#39;s were we tell our path what shape it should take
    path.setAttribute(&#39;d&#39;, drawLine(entry.data))
    path.setAttribute(&#39;class&#39;, &#39;line&#39;)
    svg.setAttribute(&#39;height&#39;, graphHeight)
    svg.setAttribute(&#39;width&#39;, graphWidth)
    svg.appendChild(path)
}</code></pre>
<p>}</p>
<p>// A little helper function to get min and max value for the x and y of our dataset
const getExtents = (data) =&gt; {
    let yExtent  = {max:0, min:null}
    let xExtent = {max:0, min:null}
    data.forEach((line)=&gt; {
        line.data.forEach(entry=&gt;{
        const [x, y] = entry
        if(x &gt; xExtent.max) 
            xExtent.max = x
        if(x &lt; xExtent.min || !xExtent.min ) 
            xExtent.min = x
        if(y &gt; yExtent.max) 
            yExtent.max = y
        if(y &lt; yExtent.min || !yExtent.min ) 
            yExtent.min = y</p>
<pre><code>    })
})
return {xExtent, yExtent}</code></pre>
<p>}</p>
<p></script></p>
