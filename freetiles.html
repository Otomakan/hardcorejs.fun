<!DOCTYPE html>
<head>
<link rel="stylesheet" type="text/css" href="main.css">
<script type="text/javascript" src="./colors.js"></script>

<script type="text/javascript" src="./helpers.js"></script>
<!-- <script type="text/javascript" src="./home.js" ></script> -->
</head>



<body>
	<form style='z-index:10; position: absolute;'>
		<input  id='num-input' type="number" defaultValue='10'>
		<button id='button-update' type='submit'>Change</button>
	</form>
	<div id='container'>

	</div>
</body>

<script>
	const container = document.getElementById('container')
	docReady(()=> {
	const body = document.getElementsByTagName('body')[0]
	drawRectangles(container)
})
window.addEventListener('scroll',function(e){
	// const body = document.getElementsByTagName('body')[0]
	const bottomScrollPos = window.pageYOffset + window.innerHeight
	// const scrollPos = body.scrollTop + window.innerHeight
	// console.log(scrollPos)

})
document.getElementById('button-update').addEventListener('click',(e)=>{
	e.preventDefault()
	const val = document.getElementById('num-input').value
	console.log(val)
	
	// const body = document.getElementsByTagName('body')[0]
	container.innerHTML = ''
	drawRectangles(container,val)
})


const drawRectangles = (div, sqNum) => {
	// Number of square minus one
	 sqNum = Number(sqNum) | 10
	const squareSizes = window.innerWidth / sqNum
	// console.log(div)
	// const mousePos = window.event.clientY
	const bottomScrollPos = window.pageYOffset + window.innerHeight
	
	const rows = bottomScrollPos/sqNum
	const margin = window.innerHeight/sqNum/sqNum
	console.log(margin)
	// Calculate columns
	for (let y = 0; y < sqNum - 1; y++) {
		// Generate rows
		for (let x = 0; x < sqNum - 1; x++) {
			const xPos = x*(squareSizes+margin)
			const yPos = y*(squareSizes+margin)

			const square = createSquare(margin + xPos,yPos, squareSizes)
			div.appendChild(square)
			window.setTimeout(()=>{
			square.style.transform = '';

			},100*(x+1)*(y+1))
		}
	}
}

const createSquare = (x, y, height) => {
	const square = document.createElement('div');
	square.style.position = 'absolute'
	square.style.width = height + 'px'

	square.style.height = height + 'px'
	square.style.left = x + 'px'
	square.style.top = y + 'px'
	square.className = 'pretty-square'
	square.style.transform = 'scale(0)';
	square.addEventListener('mouseenter', ()=>{
		square.style.background = colors[Math.floor(Math.random()*colors.length)]
		// square.style.zIndex = '-1'
		
	})
	return square
}

const uniqueAnimationColor = () => {

}
</script>